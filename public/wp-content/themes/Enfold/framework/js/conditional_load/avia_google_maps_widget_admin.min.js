!function(a){"use strict";var i="";a(function(){a("body").avia_google_maps_options(),a(document).on("widget-added",function(i,o){if(a("body").hasClass("block-editor-page")){var e=(o=a(o)).find('form input[name="widget-id"]');if(0!=e.length)e.val().search("avia_google_maps")<0||a("body").avia_google_maps_options(o)}}),a(document).ajaxSuccess(function(i,o,e){void 0!==e.data&&void 0!==e.data.search&&-1!==e.data.search("action=save-widget")&&-1!==e.data.search("id_base=avia_google_maps")&&a("body").avia_google_maps_options()})}),a.fn.avia_google_maps_options=function(o){var e=a(void 0===o?"body":o);e.find(".avia-find-coordinates-wrapper,.avia-loading-coordinates").hide(),e.find(".avia-coordinates-help-link").on("click",function(a){a.preventDefault(),(i=jQuery(this).parents(".widget-content")).find(".avia-coordinates-help-link").hide(),i.find(".avia-coordinates-wrapper").hide(),i.find(".avia-find-coordinates-wrapper").show()}),e.find(".avia-populate-coordinates").on("click",function(a){a.preventDefault();var o=(i=jQuery(this).parents(".widget-content")).find(".avia-map-street-address").val(),e=i.find(".avia-map-city").val(),n=i.find(".avia-map-state").val(),t=i.find(".avia-map-postcode").val(),d=i.find(".avia-map-country").val();i.find(".avia-loading-coordinates").show(),function(a){(new google.maps.Geocoder).geocode({address:a},function(o,e){var n="";if(e===google.maps.GeocoderStatus.OK){var t=o[0].geometry.location.lat(),d=o[0].geometry.location.lng();!function(a,o){i.find(".avia-map-lat").val(a),i.find(".avia-map-lng").val(o)}(t,d)}else e===google.maps.GeocoderStatus.ZERO_RESULTS?n=a.replace(/\s/g,"").length?AviaMapTranslation.latitude+" "+a+" "+AviaMapTranslation.notfound:AviaMapTranslation.insertaddress:e===google.maps.GeocoderStatus.OVER_QUERY_LIMIT&&(n=AviaMapTranslation.toomanyrequests);""!==n&&alert(n),i.find(".avia-coordinates-help-link").show(),i.find(".avia-find-coordinates-wrapper").fadeOut("fast"),i.find(".avia-loading-coordinates").hide(),i.find(".avia-coordinates-wrapper").show()})}(o+" "+e+" "+n+" "+t+" "+d)})}}(jQuery);