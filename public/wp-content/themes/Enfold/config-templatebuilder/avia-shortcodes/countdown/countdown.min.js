!function(e){"use strict";var t=["years","months","weeks","days","hours","minutes","seconds"],a=function(e,t){var a,n,o=t.getDate(),r=o-e.day;(r<0&&(a=e.month,n=e.year,r=new Date(n,a,0).getDate()-e.day+o),r>0)&&(new Date(e.year,e.month-1,e.day+r,e.hours,e.minutes,e.seconds)>t&&r--);return r>=0?r:0},n=function(e,t){var n,o={year:(n=e).getFullYear(),month:n.getMonth()+1,day:n.getDate(),hours:n.getHours(),minutes:n.getMinutes(),seconds:n.getSeconds()},r={years:0,year_months:0,month_months:0,days:0};return r.years=function(e,t){var a=t.getFullYear()-e.year;a>0&&new Date(e.year+a,e.month-1,e.day,e.hours,e.minutes,e.seconds)>t&&a--;return a>=0?a:0}(o,t),o.year+=r.years,r.year_months=function(e,t){var a=t.getMonth()+1,n=a-e.month;n<0&&(n=12-e.month+a),n>0&&new Date(e.year,e.month-1+n,e.day,e.hours,e.minutes,e.seconds)>t&&n--;return n>=0?n:0}(o,t),o.month+=r.year_months,r.days=a(o,t),o.day+=r.days,r.month_months=12*r.years+r.year_months,r},o=function(t){var a=new Date,o=new Date(a.getTime()+6e4*a.getTimezoneOffset()),r=t.end-o;if(r<=0)clearInterval(t.countdown);else{t.time.years=0,t.time.months=0,t.time.weeks=Math.floor(r/6048e5),t.time.days=Math.floor(r%6048e5/864e5),t.time.hours=Math.floor(r%864e5/36e5),t.time.minutes=Math.floor(r%36e5/6e4),t.time.seconds=Math.floor(r%6e4/1e3);var i=n(o,t.end);switch(t.data.maximum){case 1:t.time.seconds=Math.floor(r/1e3);break;case 2:t.time.minutes=Math.floor(r/6e4);break;case 3:t.time.hours=Math.floor(r/36e5);break;case 4:t.time.days=Math.floor(r/864e5);break;case 6:t.time.days=i.days,t.time.months=i.month_months;break;case 7:t.time.days=i.days,t.time.months=i.year_months,t.time.years=i.years}for(var s in t.time)if("object"==typeof t.update[s]&&(t.firstrun||t.oldtime[s]!=t.time[s])){var m=1===t.time[s]?"single":"multi";t.update[s].time_container.text(t.time[s]),t.update[s].label_container.text(t.update[s][m])}t.firstrun&&t.container.addClass("av-countdown-active"),t.oldtime=e.extend({},t.time),t.firstrun=!1}};e.fn.aviaCountdown=function(a){if(this.length)return this.each(function(){var a={update:{},time:{},oldtime:{},firstrun:!0};for(var n in a.container=e(this),a.data=a.container.data(),a.end=new Date(a.data.year,a.data.month,a.data.day,a.data.hour,a.data.minute),"0"!=a.data.timezone&&(a.end=new Date(a.end.getTime()-6e4*a.data.timezone)),t)a.update[t[n]]={time_container:a.container.find(".av-countdown-"+t[n]+" .av-countdown-time"),label_container:a.container.find(".av-countdown-"+t[n]+" .av-countdown-time-label")},a.update[t[n]].label_container.length&&(a.update[t[n]].single=a.update[t[n]].label_container.data("label"),a.update[t[n]].multi=a.update[t[n]].label_container.data("label-multi"));o(a),a.countdown=setInterval(function(){o(a)},1e3)})}}(jQuery);