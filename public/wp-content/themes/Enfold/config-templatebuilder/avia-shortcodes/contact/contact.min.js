!function(a){a.fn.avia_ajax_form=function(r){var e=a.extend({sendPath:"send.php",responseContainer:".ajaxresponse"},r);return this.each(function(){var r=a(this),t=!1,i={formElements:r.find("textarea, select, input[type=text], input[type=checkbox], input[type=hidden]"),validationError:!1,button:r.find("input:submit"),dataObj:{},withError:[]},s=r.next(e.responseContainer).eq(0);i.button.on("click",function(o){if(i.validationError=!1,i.datastring="ajax=true",i.formElements=r.find("textarea, select, input[type=text], input[type=checkbox], input[type=hidden], input[type=email]"),i.formElements.each(function(e){var t,s,o=a(this),n=o.parent(),l=o.val(),d=n.find("label").text().replace(/\*/g,"").trim(),v=o.attr("name"),c=o.attr("class"),m=!0;if(o.is(":checkbox")&&(l=!!o.is(":checked")||""),i.dataObj[v]=encodeURIComponent(l),c&&c.match(/is_empty/)&&(""==l||null==l?(n.removeClass("valid error ajax_alert").addClass("error"),i.validationError=!0,i.withError.push(d)):n.removeClass("valid error ajax_alert").addClass("valid"),m=!1),c&&c.match(/is_email/)&&(l.match(/^[\w|\.|\-]+@\w[\w|\.|\-]*\.[a-zA-Z]{2,20}$/)?n.removeClass("valid error ajax_alert").addClass("valid"):(n.removeClass("valid error ajax_alert").addClass("error"),i.validationError=!0,i.withError.push(d)),m=!1),c&&c.match(/is_ext_email/)&&(l.match(/^[\w\.\-ÄÖÜäöü]+@\w[\w\.\-ÄÖÜäöü]*\.[a-zA-Z]{2,20}$/)?n.removeClass("valid error ajax_alert").addClass("valid"):(n.removeClass("valid error ajax_alert").addClass("error"),i.validationError=!0,i.withError.push(d)),m=!1),c&&c.match(/is_special_email/)&&(l.match(/^[a-zA-Z0-9.!#$%&'*+\-\/=?^_`{|}~ÄÖÜäöü]+@\w[\w\.\-ÄÖÜäöü]*\.[a-zA-Z]{2,20}$/)?n.removeClass("valid error ajax_alert").addClass("valid"):(n.removeClass("valid error ajax_alert").addClass("error"),i.validationError=!0,i.withError.push(d)),m=!1),c&&c.match(/is_phone/)&&(l.match(/^(\d|\s|\-|\/|\(|\)|\[|\]|e|x|t|ension|\.|\+|\_|\,|\:|\;){3,}$/)?n.removeClass("valid error ajax_alert").addClass("valid"):(n.removeClass("valid error ajax_alert").addClass("error"),i.validationError=!0,i.withError.push(d)),m=!1),c&&c.match(/is_number/)&&(l.match(/^-?\s*(0|[1-9]\d*)([\.,]\d+)?$/)?n.removeClass("valid error ajax_alert").addClass("valid"):(n.removeClass("valid error ajax_alert").addClass("error"),i.validationError=!0,i.withError.push(d)),m=!1),c&&c.match(/is_positiv_number/)&&("number"!=(s=typeof(t=l))&&"string"!==s||isNaN(t-parseFloat(t))||""==l||l<0?(n.removeClass("valid error ajax_alert").addClass("error"),i.validationError=!0,i.withError.push(d)):n.removeClass("valid error ajax_alert").addClass("valid"),m=!1),c&&c.match(/captcha/)&&!c.match(/recaptcha/)){var h=r.find("#"+v+"_verifier").val(),u=h.charAt(h.length-1);l!=h.charAt(u)?(n.removeClass("valid error ajax_alert").addClass("error"),i.validationError=!0):n.removeClass("valid error ajax_alert").addClass("valid"),m=!1}m&&""!=l&&n.removeClass("valid error ajax_alert").addClass("valid")}),r.find(".av-fields-with-error").remove(),0==i.validationError)r.data("av-custom-send")?function(){if(t)return!1;t=!0;var o=i.button.val();i.button.addClass("av-sending-button"),i.button.val(i.button.data("sending-label")),i.dataObj.ajax_mailchimp=!0;var n=r.data("avia-redirect")||!1,l=r.attr("action"),d=r.find(".av-form-error-container"),v=r.data("avia-form-id");a.ajax({url:l,type:"POST",data:i.dataObj,beforeSend:function(){d.length&&d.slideUp(400,function(){d.remove(),a("body").trigger("av_resize_finished")})},success:function(d){var c=jQuery("<div>").append(jQuery.parseHTML(d)),m=c.find(".av-form-error-container");if(m.length)t=!1,r.prepend(m),m.css({display:"none"}).slideDown(400,function(){a("body").trigger("av_resize_finished")}),i.button.removeClass("av-sending-button"),i.button.val(o);else if(n&&l!=n)r.attr("action",n),location.href=n;else{var h=c.find(e.responseContainer+"_"+v);s.html(h).removeClass("hidden").css({display:"block"}),r.slideUp(400,function(){s.slideDown(400,function(){a("body").trigger("av_resize_finished")}),i.formElements.val("")})}},error:function(){},complete:function(){}})}():function(){if(t)return!1;if(i.button.hasClass("avia_button_inactive"))return!1;t=!0,i.button.addClass("av-sending-button"),i.button.val(i.button.data("sending-label"));var o=r.data("avia-redirect")||!1,n=r.attr("action");if(r.is(".av-form-labels-style"))return;s.load(n+" "+e.responseContainer,i.dataObj,function(){o&&n!=o?(r.attr("action",o),location.href=o):(s.removeClass("hidden").css({display:"block"}),r.slideUp(400,function(){s.slideDown(400,function(){a("body").trigger("av_resize_finished")}),i.formElements.val("")}))})}();else if(r.is(".av-show-form-errors")&&i.withError.length>0){var n=i.withError.join(", "),l=a('<p class="av-fields-with-error"></p').insertAfter(a(i.button).parent());l.text("Found errors in the following field(s): "+n),i.withError=[]}return!1}),a.avia_utilities.isMobile&&i.formElements.each(function(r){var e=a(this);e.hasClass("is_email")&&e.attr("type","email")})})}}(jQuery);